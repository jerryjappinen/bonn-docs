@import './new-color-values';

@function into-hsl-string ($color) {
  @return '#{hue($color)}, #{saturation($color)}, #{lightness($color)}';
}

.new-colors {

  // Special colors
  @each $simple-color-name, $simple-color-value in $simple-colors {
    --#{$simple-color-name}-hsl: #{into-hsl-string($simple-color-value)};
    --#{$simple-color-name}: hsl(var(--#{$simple-color-name}-hsl));
  }

  @each $color-name, $color-values in $colors {

    // Color-code variables
    @each $color-code, $color-value in $color-values {

      // HSL-codes only (will never change)
      // e.g. --grey-40-hsl-raw: 0, 0%, 63%;
      --#{$color-name}-#{$color-code}-hsl-raw: #{into-hsl-string($color-value)};

      // HSL-codes only: can be used for hsla() by users
      // e.g. --grey-40-hsl: var(--grey-40-hsl-raw);
      --#{$color-name}-#{$color-code}-hsl: var(--#{$color-name}-#{$color-code}-hsl-raw);

      // Regular variables
      // e.g. --grey-40: hsl(var(--grey-40-hsl));
      --#{$color-name}-#{$color-code}: hsl(var(--#{$color-name}-#{$color-code}-hsl));

      // Flipped color-code variables
      // NOTE: these can be overridden by user
      // e.g. --inverted-grey-80-hsl: var(--grey-20-hsl);
      // e.g. --inverted-grey-80: var(--inverted-grey-80-hsl);
      --inverted-#{$color-name}-#{$color-code}-hsl: var(--#{$color-name}-#{map-get($color-code-pairs, $color-code)}-hsl);
      --inverted-#{$color-name}-#{$color-code}: hsl(var(--inverted-#{$color-name}-#{$color-code}-hsl));
    }

    // Named color variants
    @each $color-variant, $color-variant-code in $color-variant-codes {

      // Only print variable if pair exists
      $color-variant-value: map-get($color-values, $color-variant-code);
      @if ($color-variant-value) {

        // Default
        // e.g. --grey: var(--grey-50);
        @if $color-variant == 'default' {
          --#{$color-name}: var(--#{$color-name}-#{$color-variant-code});
          --inverted-#{$color-name}: var(--#{$color-name}-#{map-get($color-code-pairs, $color-variant-code)});

        // Other variants
        // e.g. --very-faint-grey: var(--grey-10);
        } @else {
          --#{$color-variant}-#{$color-name}: var(--#{$color-name}-#{$color-variant-code});
          --inverted-#{$color-variant}-#{$color-name}: var(--#{$color-name}-#{map-get($color-code-pairs, $color-variant-code)});
        }

      }

    }

  }

}
